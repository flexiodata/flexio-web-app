{
    "name": "GitHub Commits",
    "ename": "github-commits",
    "description": "Review commits across multiple repositories",
    "task": [
        {
            "op": "input",
            "description": "Read 3 repository commit histories from GitHub API",
            "metadata": {
                "connection_type": "http"
            },
            "params": {
                "items": [
                    {
                        "path": "https:\/\/api.github.com\/repos\/flexiodata\/docs-web-app\/commits"
                    },
                    {
                        "path": "https:\/\/api.github.com\/repos\/flexiodata\/docs-getting-started\/commits"
                    },
                    {
                        "path": "https:\/\/api.github.com\/repos\/flexiodata\/docs-api\/commits"
                    }
                ]
            }
        },
        {
            "op": "convert",
            "description": "Convert from json to table",
            "params": {
                "output": {
                    "format": "table"
                }
            }
        },
        {
            "op": "merge",
            "description": "Merge three tables together",
            "params": []
        },
        {
            "op": "calc",
            "description": "Create new field 'repository' which concatenates two different parts of the 'commit.tree.url' field to isolate 'user/repo'",
            "params": {
                "name": "repository",
                "expression": "concat(strpart([commit.tree.url],'\/',5),'\/',strpart([commit.tree.url],'\/',6))"
            }
        },
        {
            "op": "select",
            "description": "Select only the relevant columns",
            "params": {
                "columns": [
                    "repository",
                    "commit.author.date",
                    "commit.author.name",
                    "commit.author.email",
                    "commit.committer.name",
                    "commit.committer.email",
                    "commit.message"
                ]
            }
        },
        {
            "op": "rename",
            "description": "Rename columns to something more readable",
            "params": {
                "columns": [
                    {
                        "name": "commit.author.date",
                        "new_name": "author_date"
                    },
                    {
                        "name": "commit.author.name",
                        "new_name": "author_name"
                    },
                    {
                        "name": "commit.author.email",
                        "new_name": "author_email"
                    },
                    {
                        "name": "commit.committer.name",
                        "new_name": "committer_name"
                    },
                    {
                        "name": "commit.committer.email",
                        "new_name": "committer_email"
                    },
                    {
                        "name": "commit.message",
                        "new_name": "commit_message"
                    }
                ]
            }
        },
        {
            "op": "sort",
            "description": "Sort descending by 'author_date'",
            "params": {
                "order": [
                    {
                        "expression": "author_date",
                        "direction": "desc"
                    }
                ]
            }
        }
    ]
}
